<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>How to add a &quot;core word&quot; (aka &quot;kernel word&quot;) to herkforth</title>
    <link rel="stylesheet" href="style.css" type="text/css">
  </head>

  <body>
<p>These pages were pulled from <a href="http://herkamire.com/jason/herkforth">the wiki</a> (on Thu Nov 11 16:47:33 EST 2004
.) Go to <a href="http://herkamire.com/jason/herkforth_add_core_word">http://herkamire.com/jason/herkforth_add_core_word</a> for the most recent version of this page, and/or to submit additions/corrections.</p>
    

    <h2>How to add a &quot;core word&quot; (aka &quot;kernel word&quot;) to herkforth</h2>

<ul>
<li>1) Edit build.c:</li>
<li>1a) add your new word to the _end_ of the core_words array</li>
<li>1b) increment NUM_CORE_WORDS</li>
<li>2) Edit blocks/040 and increment elf-core-words</li>
<li>3) Define your word in block 50 or 52</li>
<li>4) If you've gotta use your new word in blocks 00-20 then add it to kernel.s:</li>
<li>4a) Define your word in asm somewhere in kernel.s</li>
<li>4b) Add another call to the dict_entry macro with the others. The hex
	    number is it's byte offset from the beginning of the dictionary
	    entry.  (Which is it's position in the core_words array in build.c
	    (counting from 0) multiplied by 32)</li>
</ul>

<p>I have become frustrated with several forths (gforth comes to mind) because I
haven't been able to find out how to add a core word. This is my attempt not to
be like those :) Hope it worked. -- <a href="jason_woofenden.html">Jason Woofenden</a></p>

<h3>See Also</h3>

<p><a href="herkforth_core_words.html">herkforth core words</a></p>

<p><a href="herkforth_internals.html">herkforth internals</a></p>

<p><a href="herkforth_docs.html">herkforth docs</a>
</p>


  </body>
</html>